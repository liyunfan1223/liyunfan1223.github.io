<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Effective C++ 阅读笔记(一) | 
        
        Moonglade
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon_io_c/favicon-32x32.png">
    <link rel="icon" href="/img/favicon_io_c/android-chrome-512x512.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="">
    <meta name="keywords" content="">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/tranquil-heart.min.css?ul3p9I9MsbOxK0L+BHzDDg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: ;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Moonglade">
    <meta name="msapplication-starturl" content="https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Moonglade">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon_io_c/apple-touch-icon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Effective C++ 阅读笔记(一) | Moonglade">
    <meta property="og:image" content="/img/favicon_io_c/android-chrome-512x512.png">
    <meta property="og:description" content="">
    

    
        <meta property="article:published_time" content="Fri Mar 03 2023 10:34:03 GMT+0800">
        <meta property="article:modified_time" content="Fri Mar 03 2023 10:35:42 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/index.html" />
    

    <!-- Structured-data for SEO -->
    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

<meta name="generator" content="Hexo 6.0.0"></head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Introduction"><span class="post-toc-number">1.</span> <span class="post-toc-text">Introduction</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#explicit%E5%85%B3%E9%94%AE%E5%AD%97"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">explicit关键字</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Accustoming-Yourself-to-C"><span class="post-toc-number">2.</span> <span class="post-toc-text">Accustoming Yourself to C++</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Item-1-View-C-as-a-federation-of-languages"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">Item 1: View C++ as a federation of languages</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Item-2-Prefer-consts-enums-and-inlines-to-defines"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">Item 2: Prefer consts, enums, and inlines to #defines.</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%94%A8%E5%B8%B8%E9%87%8F%E4%BB%A3%E6%9B%BF-define"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">用常量代替 #define</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E7%94%A8%E5%86%85%E8%81%94%E6%A8%A1%E6%9D%BF%E4%BB%A3%E6%9B%BF-define"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">用内联模板代替 #define</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Item-3-Use-const-whenever-possible"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">Item 3: Use const whenever possible.</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%9C%A8%E6%8C%87%E9%92%88%E4%B8%8A%E4%BD%BF%E7%94%A8-const"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">在指针上使用 const</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%9C%A8%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC%E4%B8%8A%E4%BD%BF%E7%94%A8-const"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">在函数返回值上使用 const</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%9C%A8%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E4%B8%8A%E4%BD%BF%E7%94%A8-const"><span class="post-toc-number">2.3.3.</span> <span class="post-toc-text">在成员函数上使用 const</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#const-%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%E7%9A%84%E4%B8%A4%E7%A7%8D%E7%AD%89%E7%BA%A7"><span class="post-toc-number">2.3.4.</span> <span class="post-toc-text">const 成员函数的两种等级</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Item-4-Make-sure-that-objects-are-initialized-before-they%E2%80%99re-used"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">Item 4: Make sure that objects are initialized before they’re used.</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%92%8C%E8%B5%8B%E5%80%BC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">初始化和赋值的区别</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#class-%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F"><span class="post-toc-number">2.4.2.</span> <span class="post-toc-text">class 的初始化顺序</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%A4%96%E9%83%A8%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E9%97%AE%E9%A2%98"><span class="post-toc-number">2.4.3.</span> <span class="post-toc-text">外部对象的初始化问题</span></a></li></ol></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Effective C++ 阅读笔记(一)
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/favicon_io/android-chrome-512x512.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>MorphLing</strong>
        <span>3月 03, 2023</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Effective C++ 阅读笔记(一)&url=https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/index.html&pic=https://moonglade.top/img/favicon_io_c/favicon-32x32.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Effective C++ 阅读笔记(一)&url=https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/index.html&via=MorphLing" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://moonglade.top/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%B8%80/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="explicit关键字"><a href="#explicit关键字" class="headerlink" title="explicit关键字"></a>explicit关键字</h3><p>在构造函数前加上<code>explicit</code>关键字可以避免编译器做期望之外的类型转换，一般来说这是很好的特性，正常情况下都应该使用它。</p>
<p>关于 c++ 中的<code>explicit</code>关键字：用于修饰只有一个参数的类构造函数，表明该构造函数是显式的，而默认情况下类构造函数是隐式的，相当于被<code>implicit</code>修饰。这个构造函数会在拷贝构造和拷贝赋值的时候产生作用，例如下面的这两种写法：</p>
<pre><code class="lang-cpp">short a = 10;
int b = a;
</code></pre>
<p>这种常见的写法利用到的就是<code>int</code>允许隐式类型转换。</p>
<p>以下面为例，比较<code>explicit</code>对类构造函数使用的影响：</p>
<pre><code class="lang-cpp">class A &#123;
 public:
  explicit A(int x): a(x) &#123;&#125;
 private:
  int a;
&#125;;

class B &#123;
 public:
  B(int x): b(x) &#123;&#125;
 private:
  int b;
&#125;;

A a1(10); // 通过，显式调用类构造函数
A a2 = 10; // 不通过，因为编译器试图隐式地将10转化为A
a1 = 10; // 不通过，编译器首先试图隐式地将10转化为A，失败后试图调用A的参数为int的拷贝赋值函数，发现未定义

B b1(10); // 通过，显式调用类构造函数
B b2 = 10; // 通过，10被隐式转化为B
b1 = 10; // 通过，首先10被隐式转化为B，接着调用B的拷贝赋值函数
</code></pre>
<p>以上现象发生的原因其实并不那么浅显，仔细推究可以发现几个疑问点：</p>
<ul>
<li><p><code>A a1(10)</code>和<code>A a2 = 10</code>两种写法非常相近，因为本质上都是调用类的拷贝构造函数，但编译器认为<code>A a2 = 10</code>涉及到将<code>10</code>从<code>int</code>转化为<code>A</code>的隐式的转换，因此禁止这种写法。</p>
</li>
<li><p><code>a1 = 10</code>和<code>b1 = 10</code>这种形式的赋值实际上有两种实现路径，一是直接调用类的参数为<code>int</code>的拷贝赋值函数，二是先将<code>10</code>隐式转化为<code>A / B</code>，在调用类的参数为<code>A / B</code>的拷贝赋值函数。</p>
<p>对于<code>a1 = 10</code>来说，两条路径都不通，从路径一来说，<code>A</code>没有定义参数为<code>int</code>的拷贝赋值函数（你可以通过定义这个函数来使得该操作通过编译器检查）；从路径二来说，将<code>10</code>隐式转化为<code>A</code>违背了<code>explicit</code>关键字的限制。</p>
<p>对于<code>b1 = 10</code>来说，同样会优先使用路径一，但由于同样没有定义参数为<code>int</code>的拷贝赋值函数，会通过路径二的方式进行实现。</p>
</li>
</ul>
<p>顺着这个思路可以继续修改<code>B</code>的拷贝赋值函数，判断编译器是如何选择路径的：</p>
<pre><code class="lang-cpp">class B &#123;
 public:

  explicit B(int x): b(x) &#123;&#125;
  B&amp; operator=(int x) &#123;
    b = x;
    std::cout &lt;&lt; &quot;int&quot; &lt;&lt; std::endl;
    return *this;
  &#125;
  B&amp; operator=(const B&amp; rhs) &#123;
    this-&gt;b = rhs.b;
    std::cout &lt;&lt; &quot;B&quot; &lt;&lt; std::endl;
    return *this;
  &#125;
 private:
  int b;
&#125;;

B b1;
b1 = 10;
</code></pre>
<p>可以通过控制<code>explicit</code>关键字（是否禁止隐式转换），以及控制是否定义<code>B&amp; operator=(int x)</code>（是否只能通过<code>B</code>进行拷贝赋值）观察结果。</p>
<ul>
<li>使用<code>explicit</code>关键字，没有定义<code>B&amp; operator=(int x)</code>，此时<code>b1 = 10</code>无法通过编译。</li>
<li>使用<code>explicit</code>关键字，定义<code>B&amp; operator=(int x)</code>，可以通过编译并输出<code>int</code>，说明<code>10</code>没有经过隐式转换，直接作为参数传给拷贝赋值函数。</li>
<li>不使用<code>explicit</code>关键字，没有定义<code>B&amp; operator=(int x)</code>，可以通过编译并输出<code>B</code>，说明<code>10</code>经过隐式转换为<code>B</code>后，再作为参数传给拷贝赋值函数。</li>
<li>不使用<code>explicit</code>关键字，定义<code>B&amp; operator=(int x)</code>，可以通过编译并输出<code>int</code>，说明编译器优先使用现成的拷贝赋值函数，其次才会考虑隐式类型转换。</li>
</ul>
<h2 id="Accustoming-Yourself-to-C"><a href="#Accustoming-Yourself-to-C" class="headerlink" title="Accustoming Yourself to C++"></a>Accustoming Yourself to C++</h2><h3 id="Item-1-View-C-as-a-federation-of-languages"><a href="#Item-1-View-C-as-a-federation-of-languages" class="headerlink" title="Item 1: View C++ as a federation of languages"></a>Item 1: View C++ as a federation of languages</h3><p>最初 c++ 仅仅在 c 的基础上引入对象概念，也就是所谓的 “C with class”。但随着时间发展有了更多内容，现在的 c++ 涵盖的范围很广。笼统地说我们可以把 c++ 视作四种子语言的混合：</p>
<ul>
<li>C 语言：代码块、声明、预处理器（预编译）、内置数据类型、数组、指针等基础概念。</li>
<li>面向对象 C++：封装、继承、多态的面向对象设计。</li>
<li>模板 C++：一种通用的设计模式，包括模板元编程 (TMP)，虽然 TMP 还不是目前主流的编程思想。</li>
<li>STL：STL 的编写方式很独特，是一种容器、迭代器、算法、函数对象的混合，这并不是唯一的库编写方法，但是在使用 STL 时必须理解编写者的思路才不容易出错。</li>
</ul>
<p>在使用C++时，需要分辨当前使用的是哪种”子语言”，甚至需要随时在”子语言”之间切换。</p>
<h3 id="Item-2-Prefer-consts-enums-and-inlines-to-defines"><a href="#Item-2-Prefer-consts-enums-and-inlines-to-defines" class="headerlink" title="Item 2: Prefer consts, enums, and inlines to #defines."></a>Item 2: Prefer consts, enums, and inlines to #defines.</h3><p>这里本质上说的是，应该把工作尽量留给编译器，而不是预处理器。</p>
<h4 id="用常量代替-define"><a href="#用常量代替-define" class="headerlink" title="用常量代替 #define"></a>用常量代替 #define</h4><p>第一个例子说明的原则是，用常量代替 #define，这样做的好处如下：</p>
<pre><code class="lang-cpp">#define ASPECT_RATIO 1.653
const double AspectRatio = 1.653;
</code></pre>
<ol>
<li>宏会在预处理阶段直接替换，如果程序抛异常，只可能抛出 1.653 这个摸不着头脑的数字，那么调试者就要花更多的时间来定位问题。相比较而言，使用定义常量抛出的 AspectRatio 会被记录在符号表里，在错误定位时更加简单。</li>
<li>使用宏定义的结果可能会导致更大的目标代码，因为这个 1.653 在目标代码中可能会有多个副本，而使用常量定义，这个值永远只有一个副本。</li>
<li>常量变量有作用域的概念，而在宏眼里是没有定义域这个概念的。这在使用面向对象的编程方法时尤其重要，因为没有定义域就没有<code>private</code>，没有<code>private</code>时，封装也就无从谈起。</li>
</ol>
<p>此处还介绍了一个约定俗成，比如下面定义的这个 class：</p>
<pre><code class="lang-cpp">class GamePlayer &#123;
    private:
    static const int NumTurns = 5; // constant declaration
    int scores[NumTurns]; // use of constant
    ...
&#125;;
</code></pre>
<p>其中，<code>static const int NumTurns = 5;</code>是一个静态常量的声明。通常在 c++ 中，你使用的任何东西都要有定义，唯一的例外是像这种 class 中静态的内置数据类型（比如 interger, char, bool），只要你没有对这些元素取地址的需求，你就不需要额外定义它们。如果你的编译器还是让你给出定义，你的定义可以写成<code>const int GamePlayer::NumTurns;</code>这样，因为你的初始值在声明里给出了，无初始值的定义是允许的。</p>
<p>然而上面的写法在一些老旧的编译器中是无法通过的，而且在 class 内部进行初始化的写法也仅限于内置数据类型，仅限于初始化为常量。在这种情况下，你就只能在定义时进行初始化了。</p>
<p>在定义时初始化可以应付大多数情况，但还是有例外，就是当你在编译阶段就需要使用到常量值的场景，典型情况是使用常量作为数组长度，因为编译器总是坚持要在编译阶段就知道数组长度。比如上面代码中 scores 数组的定义。</p>
<p>解决这个场景的常用方法是 “the enum hack”，用枚举类型代替 int。比如你可以像这样写：</p>
<pre><code class="lang-cpp">class GamePlayer &#123;
private:
    enum &#123; NumTurns = 5 &#125;; // “the enum hack” — makes NumTurns a symbolic name for 5
    int scores[NumTurns];  // fine
    ...
&#125;;
</code></pre>
<p>关于 “the enum hack” 需要知道以下几点：</p>
<ol>
<li>它在功能上其实更接近于 #define，因为 enum 无法取地址也无法引用，当你不希望这些发生时，enum 是一个很好的选择。</li>
<li>一般来说，编译器不会为内置数据类型的常量留出内存空间，但是如果编译器很糟糕，这还是有可能的，用 enum 可以彻底避免这样的内存分配。</li>
<li>需要了解 “the enum hack” 的一个很实在的原因是，这种写法很普遍，你需要在看到时立刻认出它。另外这也是模板元编程的基本技巧。</li>
</ol>
<h4 id="用内联模板代替-define"><a href="#用内联模板代替-define" class="headerlink" title="用内联模板代替 #define"></a>用内联模板代替 #define</h4><p>另一个例子介绍的原则是，如果需要用形式和函数类似的宏，那么更好的方法是用内联模板来替代它们。</p>
<p>例如以下两种写法：</p>
<pre><code class="lang-cpp">#define CALL_WITH_MAX(a, b) f((a) &gt; (b) ? (a) : (b))

template&lt;typename T&gt;                         
inline void callWithMax(const T&amp; a, const T&amp; b) 
&#123; 
    f(a &gt; b ? a : b); 
&#125;
</code></pre>
<p>如果真的把这个宏当成函数来使用，可能会产生极其糟糕和难以察觉的后果，比如说：</p>
<pre><code class="lang-cpp">int a = 5, b = 0;
CALL_WITH_MAX(++a, b);    // a is incremented twice
CALL_WITH_MAX(++a, b+10); // a is incremented once
</code></pre>
<p>而模板的好处则非常容易列举：</p>
<ol>
<li>不需要给参数再加额外的括号。</li>
<li>不需要担心计算发生了很多次。</li>
<li>最重要的，模板函数是一个真的函数，遵守了作用域和访问权限的约束，也自然能符合 class 中私有成员函数的定义。一般来说，没有宏能真正做到这一点。</li>
</ol>
<p>综上，当可以使用常量和模板来替代时，#define 应该用的越少越好。当然，其他的预处理宏还是必要的，比如 #include，比如 #ifdef / #ifndef，这些语句在编译控制阶段的作用很重要。所以预处理阶段不能被完全取代，只是需要多给它放放假（。</p>
<h3 id="Item-3-Use-const-whenever-possible"><a href="#Item-3-Use-const-whenever-possible" class="headerlink" title="Item 3: Use const whenever possible."></a>Item 3: Use const whenever possible.</h3><p>const 关键字让你能够告知编译器和其他程序员，这是一个不应该被修改的对象。这里给出的建议是，只要能用 const 的地方就一律使用。</p>
<h4 id="在指针上使用-const"><a href="#在指针上使用-const" class="headerlink" title="在指针上使用 const"></a>在指针上使用 const</h4><p>在使用<code>const</code>修饰指针时，可能会有两种语义，一是修饰指针本身，二是修改指针指向的值，因此会有以下四种情况：</p>
<pre><code class="lang-cpp">char greeting[] = &quot;Hello&quot;;
char *p = greeting; // non-const pointer, non-const data
const char *p = greeting; // non-const pointer, const data
char * const p = greeting; // const pointer, non-const data
const char * const p = greeting; // const pointer, const data
</code></pre>
<p>这里有一个简单的记忆方式：看<code>const</code>出现在<code>*</code>的左边还是右边，左边则修饰指向值，右边则修饰指针本身。掌握这个原则之后，可以判断出来<code>const Widget *pw</code>和<code>Widget const *pw</code>两种写法是完全等价的。</p>
<p>和指针性质非常类似的是 STL 迭代器，我们可以直接用<code>const</code>修饰迭代器本身，但如果希望把迭代器指向的值视为常量，那么需要使用的是<code>const_iterator</code>：</p>
<pre><code class="lang-cpp">std::vector&lt;int&gt; vec;
...
const std::vector&lt;int&gt;::iterator iter = // iter acts like a T* const
vec.begin();
*iter = 10; // OK, changes what iter points to
++iter; // error! iter is const
std::vector&lt;int&gt;::const_iterator cIter = // cIter acts like a const T* vec.begin();
*cIter = 10; // error! *cIter is const
++cIter; // fine, changes cIter
</code></pre>
<h4 id="在函数返回值上使用-const"><a href="#在函数返回值上使用-const" class="headerlink" title="在函数返回值上使用 const"></a>在函数返回值上使用 const</h4><p>这不是一个通用的准则，但有时会有奇效，例如重载乘法时会有以下的写法：</p>
<pre><code class="lang-cpp">class Rational &#123; ... &#125;;
const Rational operator*(const Rational&amp; lhs, const Rational&amp; rhs);
</code></pre>
<p>返回一个<code>const Rational</code>的好处是，如果你在 if 判断中错把<code>==</code>写成了<code>=</code>，编译器可能能够帮你发现这个错误，比如：</p>
<p><code>if (a * b = c) ...</code>，由于<code>a * b</code>不能被赋值修改，自然就无法通过编译了。</p>
<h4 id="在成员函数上使用-const"><a href="#在成员函数上使用-const" class="headerlink" title="在成员函数上使用 const"></a>在成员函数上使用 const</h4><p>例如下面这个 class：</p>
<pre><code class="lang-cpp">class TextBlock &#123;
public:
    ...
    const char&amp; operator[](std::size_t position) const // operator[] for
        &#123; return text[position]; &#125; // const objects
    char&amp; operator[](std::size_t position) // operator[] for
        &#123; return text[position]; &#125; // non-const objects
private:
    std::string text;
&#125;;
</code></pre>
<p>成员函数最后的<code>const</code>用于指示这个函数不能对成员变量造成修改。被<code>const</code>修饰的成员函数相当于作出了一个承诺，这个承诺使它无法调用其他未被<code>const</code>修饰的成员函数。</p>
<p>具体地说上面的这个例子，它重载了[]符号，重载的两种形式分别对应了当调用者是<code>const TextBlock</code>和<code>TextBlock</code>两种，它们的返回引用形式也不同：</p>
<pre><code class="lang-cpp">TextBlock tb(&quot;Hello&quot;);
std::cout &lt;&lt; tb[0]; // calls non-const
tb[0] = ’x’; // fine — writing a non-const TextBlock

const TextBlock ctb(&quot;World&quot;);
std::cout &lt;&lt; ctb[0]; // calls const TextBlock::operator[]
ctb[0] = ’x’; // error! — writing a const TextBlock
</code></pre>
<p>可以发现这种重复的实现带来了代码冗余，尤其是如果<code>[]</code>操作符的功能被进一步扩展，比如增加了边界检查、日志等等功能之后，两个函数里可能都要写一遍这些功能。一种方法是额外增加一个 private 方法，然后两种形式的操作符都去调用这个 private 方法，但这仍然是一种冗余。一个进一步避免冗余的方法是，实现其中一个，然后让另一个去调用它。刚才说到<code>const</code>成员函数不能调用非<code>const</code>成员函数，而非<code>const</code>成员函数则没有任何限制，所以一定是实现<code>const</code>成员函数，让非<code>const</code>成员函数调用它，比如像下面这样：</p>
<pre><code class="lang-cpp">class TextBlock &#123;
public:
    ...
    const char&amp; operator[](std::size_t position) const // same as before
    &#123;
        ...
        return text[position];
    &#125;
    char&amp; operator[](std::size_t position) // now just calls const op[]
    &#123;
        return const_cast&lt;char&amp;&gt;( // cast away const on op[]’s return type;
            static_cast&lt;const TextBlock&amp;&gt;(*this) // add const to *this’s type;
            [position] // call const version of op[]
        );
    &#125;
    ...
&#125;;
</code></pre>
<p>这里涉及了两次<code>cast</code>转换，实际上是先加上一个<code>const</code>再去掉它：先把<code>TextBlock&amp;</code>变成<code>const TextBlock&amp;</code>，调用<code>const</code>成员函数，再把返回值从<code>const char&amp;</code>转换为<code>char &amp;</code>。具体来说，加上<code>const</code>是一个比较宽松（或者说安全）的操作，<code>static_cast</code>就可以做到，而去掉<code>const</code>是一个比较严格的操作，必须使用<code>const_cast</code>才能做到。</p>
<p>这个实现或许也不是很优美，甚至有点奇怪，因为<code>cast</code>最好也不要滥用。但是这种减少代码冗余的思想是值得学习的：我们可以通过在非<code>const</code>成员函数里调用<code>const</code>成员函数，并使用<code>const_cast</code>来对<code>const</code>对象进行转换。</p>
<h4 id="const-成员函数的两种等级"><a href="#const-成员函数的两种等级" class="headerlink" title="const 成员函数的两种等级"></a>const 成员函数的两种等级</h4><p>这里提出了两种 const 等级：</p>
<ul>
<li>bitwise-constness：认为 const 成员函数不应当修改任何类内的成员变量，也就是从数据成员的角度讲，const 函数被执行前后不应该发生任何变化。</li>
<li>logical-constness：认为只要从外部，或者说从用户的角度来讲，const 成员函数没有导致类的状态发生变化即可。比如一些仅用作缓存功能的 private 成员变量可以发生变化，只要用户无法感知到即符合要求。</li>
</ul>
<p>从编译器的角度来说，只有bitwise-constness能够通过编译。但借助<code>mutable</code>关键字也可以实现logical-constness，被<code>mutable</code>修饰的成员变量是可以在 const 成员函数内被修改的，修改这些变量也不会导致编译不通过的问题。</p>
<pre><code class="lang-cpp">class CTextBlock &#123;
public:
    ...
    std::size_t length() const;
private:
    char *pText;
    mutable std::size_t textLength; // these data members may
    mutable bool lengthIsValid; // always be modified, even in
&#125;; // const member functions
std::size_t CTextBlock::length() const
&#123;
    if (!lengthIsValid) &#123;
        textLength = std::strlen(pText); // now fine
        lengthIsValid = true; // also fine
    &#125;
    return textLength;
&#125;
</code></pre>
<p>补充：现在似乎并不那么推崇在任何情况下都尽可能多地使用<code>const</code>了，主要原因是<code>const</code>和许多其他的语言特性一样，具有一种传染性，比如将一个成员函数修饰成<code>const</code>后，所以被它调用的函数也要做修改，这可能会增加工程实现的复杂度。</p>
<h3 id="Item-4-Make-sure-that-objects-are-initialized-before-they’re-used"><a href="#Item-4-Make-sure-that-objects-are-initialized-before-they’re-used" class="headerlink" title="Item 4: Make sure that objects are initialized before they’re used."></a>Item 4: Make sure that objects are initialized before they’re used.</h3><p>C++ 的对象初始化规则非常复杂，以至于很难掌握，最好的方法在每次使用对象之前都确保它被初始化了。这当然会造成一些性能上的开销，但是这个开销比起未初始化造成的风险来说是微不足道的。</p>
<h4 id="初始化和赋值的区别"><a href="#初始化和赋值的区别" class="headerlink" title="初始化和赋值的区别"></a>初始化和赋值的区别</h4><p>以一个 class 为例：</p>
<pre><code class="lang-cpp">class ABEntry &#123; // ABEntry = “Address Book Entry”
public:
    ABEntry(const std::string&amp; name, const std::string&amp; address,
    const std::list&lt;PhoneNumber&gt;&amp; phones);
private:
    std::string theName;
    std::string theAddress;
    std::list&lt;PhoneNumber&gt; thePhones;
    int numTimesConsulted;
&#125;;
</code></pre>
<p>它的构造函数经常可以见到两种写法：</p>
<pre><code class="lang-cpp">ABEntry::ABEntry(const std::string&amp; name, const std::string&amp; address,
const std::list&lt;PhoneNumber&gt;&amp; phones)
&#123;
    theName = name; // these are all assignments,
    theAddress = address; // not initializations
    thePhones = phones;
    numTimesConsulted = 0;
&#125;

ABEntry::ABEntry(const std::string&amp; name, const std::string&amp; address,
                 const std::list&lt;PhoneNumber&gt;&amp; phones)
    : theName(name),
    theAddress(address), // these are now all initializations
    thePhones(phones),
    numTimesConsulted(0)
&#123;&#125; // the ctor body is now empty
</code></pre>
<p>虽然它们最终的效果几乎一样，但是实现的过程是完全不同的。第一种写法实际上是默认初始化 + 拷贝赋值的组合，而第二种写法则是直接调用拷贝构造函数进行初始化。对于非内置的数据类型来说，这可能会造成很大的性能差异。但是对于内置的数据类型，比如这里的 numTimesConsulted 来说，初始化和赋值在性能上是没有差距的，但是为了一致性的考虑最好还是应该采用第二种写法。</p>
<p>如上第二种形式的写法叫做 initialization list。对于<code>const</code>或者引用对象，必须使用 initialization list进行初始化，比如 class 中有一个<code>const int</code>，那么就必须以第二种写法进行初始化，编译器不允许使用第一种写法，因为会被认为对<code>const int</code>进行赋值修改。对于其他对象，如果非内置数据类型没有出现在 initialization list 中，编译器就会自动对这些对象进行默认的初始化；如果内置数据类型没有出现在 initialization list 中，这种行为似乎未定义的，同样可能导致未定义的糟糕后果，所以应当保证每个成员对象都出现在了initialization list中。</p>
<h4 id="class-的初始化顺序"><a href="#class-的初始化顺序" class="headerlink" title="class 的初始化顺序"></a>class 的初始化顺序</h4><p> class 内进行初始化的顺序与 initialization list 的顺序无关，只和 class 中被定义的顺序有关，比如：</p>
<pre><code class="lang-cpp">class ABEntry &#123;
 public:
  ABEntry(): d(a + b + c), a(10), b(5), c(2) &#123;&#125;
 private:
  int a, b, c, d;
&#125;;
</code></pre>
<p>经过初始化后变量<code>d</code>的值为 17。当然这个特性很容易造成混淆误解，所以为了代码的可读性也为了避免未定义行为，请按照定义的顺序构造 initialization list。</p>
<h4 id="外部对象的初始化问题"><a href="#外部对象的初始化问题" class="headerlink" title="外部对象的初始化问题"></a>外部对象的初始化问题</h4><p>对于本地对象来说，在使用对象之前，总是能保证对象已进行过初始化，但对于外部对象来说就不是这样，比如定义了一个文件系统，从外部获取到这个系统的实例：</p>
<pre><code class="lang-cpp">class FileSystem &#123; // from your library’s header file
public:
    ...
    std::size_t numDisks() const; // one of many member functions ...
&#125;;
extern FileSystem tfs; // declare object for clients to use// (“tfs” = “the file system” ); definition is in some .cpp file in your library
</code></pre>
<p>现在我们需要使用到这个实例的方法来进行另一个初始化：</p>
<pre><code class="lang-cpp">class Directory &#123; // created by library client
public:
     Directory( params ); ...
&#125;;
Directory::Directory( params )
&#123;
    ...
    std::size_t disks = tfs.numDisks(); // use the tfs object ...
&#125;
Directory tempDir( params ); // directory for temporary files
</code></pre>
<p>这时候的问题在于，<code>tfs</code>必须在<code>tempDir</code>被初始化之前初始化，但<code>tfs</code>对于一个外部对象来说，这一点是不被保证的。</p>
<p>这里可以引入单例模式解决这个问题，由于<code>FileSystem</code>只需要一个实例，因此可以用下面这种方法把一个外部对象转化为本地静态对象：</p>
<pre><code class="lang-cpp">class FileSystem &#123; ... &#125;; // as before
FileSystem&amp; tfs() // this replaces the tfs object; it could be static in the FileSystem class
&#123;
    static FileSystem fs; // define and initialize a local static object
    return fs; // return a reference to it
&#125;
</code></pre>
<p>由于 c++ 保证了内部静态对象会在首次遇到其定义时被初始化，所以这样转换后初始化的依赖问题就被解决了。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script> 
<script>
    var gitalk = new Gitalk({
            clientID: 'b8ab854d61e4537d8b06',
            clientSecret: '2557531f91b562289cfc3025675934139fc97766',
            repo: 'gitalk-repo',
            owner: 'liyunfan1223',
            admin: ['liyunfan1223'],
            id: md5(location.pathname),
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2023/03/03/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/Effective-C-%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0-%E4%BA%8C/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2022/07/04/%E9%9A%8F%E4%BE%BF%E8%81%8A%E8%81%8A/%E5%BF%83%E7%81%B5%E6%8D%95%E6%89%8B/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/favicon_io/android-chrome-512x512.png" alt="MorphLing's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        liyunfan1223@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2023/03/">三月 2023<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/07/">七月 2022<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/06/">六月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/05/">五月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/04/">四月 2022<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/03/">三月 2022<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/02/">二月 2022<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2022/01/">一月 2022<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/12/">十二月 2021<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/11/">十一月 2021<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/10/">十月 2021<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/09/">九月 2021<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/08/">八月 2021<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/07/">七月 2021<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/06/">六月 2021<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/05/">五月 2021<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/04/">四月 2021<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/03/">三月 2021<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/02/">二月 2021<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2021/01/">一月 2021<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/12/">十二月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/11/">十一月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/10/">十月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/08/">八月 2020<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/07/">七月 2020<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/06/">六月 2020<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/05/">五月 2020<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2020/04/">四月 2020<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">博客搭建<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E6%9D%82%E9%A1%B9/">杂项<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B/">算法竞赛<span class="sidebar_archives-count">55</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">课程笔记<span class="sidebar_archives-count">13</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E9%9A%8F%E4%BE%BF%E8%81%8A%E8%81%8A/">随便聊聊<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93/">项目总结<span class="sidebar_archives-count">27</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/links" title="友链">
                
                    <i class="material-icons sidebar-material-icons">face</i>
                
                友链
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">cloud_circle</i>
                
                标签云
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

    <a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.help
        <span class="mdl-button__ripple-container">
          <span class="mdl-ripple"></span>
        </span>
      </div>
    </a>

-->

<!-- Feedback -->
<!--

    <a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.feedback
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

<!-- About Theme -->
<!--

    <a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
             sidebar.about_theme
            <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2020&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Moonglade
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://api.i-meto.com/bing?type=T');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
    
</html>
